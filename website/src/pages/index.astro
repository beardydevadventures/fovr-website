---
import Layout from '@/layouts/PageLayout.astro';

import Hero from '@/components/widgets/Hero.astro';
import CallToAction from '@/components/widgets/CallToAction.astro';
import Features2 from '@/components/widgets/Features2.astro';
import Features from '@/components/widgets/Features.astro';
import Stats from '@/components/widgets/Stats.astro';
import FAQs from '@/components/widgets/FAQs.astro';
import Image from '@/components/common/Image.astro';
import { getCollection } from 'astro:content';

import { YouTube } from 'astro-embed';

const metadata = {
  title: 'Home',
};

const projectEntries = await getCollection('projects');
const highlightedProjects = projectEntries
  .map(({ slug, data }) => ({ slug, ...data }))
  .filter((project) => project.highlight !== false)
  .slice(0, 3);
---

<Layout metadata={metadata}>

  <!-- Hero Widget ******************* -->

  <Hero
    tagline="Immersive Worlds, Innovative Technology"
    actions={[
      { text: 'Learn more', href: '#projects' },
    ]}
  >
    <Fragment slot="background">
      <div class="hero3d-bg absolute inset-0">
        <div class="hero3d-grad hero3d-grad-1"></div>
        <div class="hero3d-grad hero3d-grad-2"></div>
        <div class="hero3d-grid">
          <div class="hero3d-plane hero3d-plane--back"></div>
          <div class="hero3d-plane hero3d-plane--front"></div>
          <div class="hero3d-dots"></div>
        </div>
      </div>
      <style is:inline>
        .hero3d-bg {
          position: absolute;
          inset: -140px 0 0 0;
          overflow: hidden;
          perspective: 1400px;
          background: radial-gradient(closest-side at 18% 20%, rgba(94, 234, 212, 0.25), transparent 55%),
            radial-gradient(closest-side at 82% 70%, rgba(59, 130, 246, 0.16), transparent 60%);
          filter: saturate(1.1);
        }

        .hero3d-grid {
          position: absolute;
          inset: -12%;
          transform-style: preserve-3d;
        }

        .hero3d-grad {
          position: absolute;
          width: 70vmax;
          height: 70vmax;
          border-radius: 50%;
          opacity: 0.55;
          filter: blur(72px);
          transform-origin: center;
        }

        .hero3d-grad-1 {
          background: radial-gradient(circle at 30% 35%, rgba(14, 165, 233, 0.6), rgba(59, 130, 246, 0.12));
          animation: hero3dDriftA 18s ease-in-out infinite alternate;
        }

        .hero3d-grad-2 {
          background: radial-gradient(circle at 65% 55%, rgba(236, 72, 153, 0.45), rgba(45, 212, 191, 0.08));
          animation: hero3dDriftB 22s ease-in-out infinite alternate;
        }

        .hero3d-plane {
          position: absolute;
          inset: 14% 12%;
          background:
            linear-gradient(180deg, rgba(255, 255, 255, 0.14), rgba(255, 255, 255, 0)),
            repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.2) 0 1px, transparent 1px 22px),
            repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.16) 0 1px, transparent 1px 22px);
          border: 1px solid rgba(255, 255, 255, 0.14);
          box-shadow:
            0 40px 140px rgba(59, 130, 246, 0.28),
            inset 0 0 40px rgba(255, 255, 255, 0.1);
          transform-style: preserve-3d;
          transform: translateZ(-160px) rotateX(68deg) rotateZ(-18deg);
          transform-origin: center;
          mask-image: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.95) 55%, transparent 82%);
          -webkit-mask-image: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.95) 55%, transparent 82%);
          opacity: 0.82;
          mix-blend-mode: screen;
        }

        .hero3d-plane--front {
          inset: 10% 20%;
          opacity: 0.7;
          transform: translateZ(-80px) rotateX(70deg) rotateZ(-12deg);
          animation: hero3dFloat 13s ease-in-out infinite alternate;
        }

        .hero3d-plane--back {
          animation: hero3dFloat 19s ease-in-out infinite alternate-reverse;
        }

        .hero3d-dots {
          position: absolute;
          inset: 6% 10%;
          background-size: 120px 120px, 160px 160px;
          background-image:
            radial-gradient(rgba(255, 255, 255, 0.25) 1px, transparent 1px),
            radial-gradient(rgba(59, 130, 246, 0.14) 1px, transparent 1px);
          mask-image: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.9) 50%, transparent 85%);
          -webkit-mask-image: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.9) 50%, transparent 85%);
          transform: translateZ(-240px);
          animation: hero3dDriftDots 26s ease-in-out infinite alternate;
          opacity: 0.7;
        }

        @keyframes hero3dDriftA {
          from {
            transform: translate3d(-6%, -8%, 0) scale(1);
          }
          to {
            transform: translate3d(8%, 10%, 0) scale(1.08);
          }
        }

        @keyframes hero3dDriftB {
          from {
            transform: translate3d(6%, -4%, 0) scale(1.05);
          }
          to {
            transform: translate3d(-4%, 12%, 0) scale(1.12);
          }
        }

        @keyframes hero3dFloat {
          from {
            transform: translateZ(-140px) rotateX(66deg) rotateZ(-16deg) translateY(-12px);
          }
          to {
            transform: translateZ(-90px) rotateX(72deg) rotateZ(-20deg) translateY(18px);
          }
        }

        @keyframes hero3dDriftDots {
          from {
            transform: translateZ(-240px) translate3d(0, -10px, 0);
          }
          to {
            transform: translateZ(-200px) translate3d(0, 14px, 0);
          }
        }

        @media (max-width: 640px) {
          .hero3d-bg {
            inset: -100px 0 0 0;
          }

          .hero3d-plane {
            inset: 20% 6%;
          }

          .hero3d-plane--front {
            inset: 14% 12%;
          }
        }

        @media (prefers-reduced-motion: reduce) {
          .hero3d-grad,
          .hero3d-plane,
          .hero3d-dots {
            animation: none !important;
          }
        }
      </style>
    </Fragment>

    <Fragment slot="title">
      Exploring XR, spatial computing, and creativity, one project at a time.
    </Fragment>

    <Fragment slot="subtitle">
      Join us on this exciting journey as we explore and build immersive VR experiences. At <span class='font-semibold'>FoVR Interactive</span>, it’s all about pushing the boundaries of creativity and innovation in XR to create something truly impactful.
    </Fragment>

    <Fragment slot="image">
      <YouTube id="92JRz7ZpLtQ" title="Discover FoVR Interactive: Revolutionising VR Experiences" />
      <style is:inline>
        lite-youtube {
          margin: 0 auto;
          max-width: 100%;
        }
      </style>
    </Fragment>
  </Hero>

  <!-- Features2 Widget ************** -->

  <Features2
    title="About FoVR Interactive"
    subtitle="<b>FoVR Interactive</b>, is a one-person indie studio with a passion for crafting immersive XR experiences. Whether it's building captivating games, designing tools, or creating entirely new worlds, our goal is simple: to make experiences that feel magical, personal, and accessible."
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Features2>

  <!-- Stats Widget ****************** -->

<Stats
    title="What Has Been Achieved So Far?"
    subtitle="FoVR Interactive is growing, fueled by curiosity, caffeine, and creativity."
    stats={[
      { title: 'Experiences Created', amount: '3', source: 'Unique VR applications launched.'},
      { title: 'App Downloads', amount: '1000+', source: 'across global platforms.'},
      { title: 'Minutes Per Day', amount: '16', source: 'Average daily time spent per user.'},
      { title: 'Caffeine Charged', amount: '95%', source: 'The other 5% is love.'},
    ]}
  />

  <section id="projects" class="relative py-16 sm:py-20">
    <div class="absolute inset-0 bg-blue-50/60 blur-3xl opacity-40 pointer-events-none dark:bg-slate-900/40"></div>
    <div class="relative max-w-6xl mx-auto px-4 sm:px-6">
      <div class="text-center mb-12">
        <p class="text-sm font-semibold uppercase tracking-wide text-primary">Projects</p>
        <h2 class="text-3xl font-bold tracking-tight text-slate-900 dark:text-white sm:text-4xl">Our latest work</h2>
        <p class="mt-3 text-muted dark:text-slate-300">
          A quick look at the VR and XR experiences we are building. Jump into a case study or launch the live builds.
        </p>
      </div>

      <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
        {highlightedProjects.map((project) => (
          <article class="group relative overflow-hidden rounded-2xl border border-slate-100/80 bg-white/90 shadow-lg shadow-primary/5 transition hover:-translate-y-1 hover:shadow-xl hover:shadow-primary/10 dark:border-slate-700/70 dark:bg-slate-900/70">
            <a class="absolute inset-0 z-0" href={`/projects/${project.slug}`} aria-label={`Open ${project.title}`} />
            <div class="relative z-10 aspect-[4/3] overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-700 dark:from-slate-800 dark:via-slate-900 dark:to-slate-950">
              <Image
                class="h-full w-full object-contain p-6 transition duration-500 group-hover:scale-[1.02]"
                src={project.cover.src}
                alt={project.cover.alt}
                width={960}
                height={720}
                loading="lazy"
              />
            </div>
            <div class="relative z-10 p-5 md:p-6">
              <div class="mb-2 flex flex-wrap items-center gap-2 text-xs font-semibold uppercase tracking-wide text-primary">
                <span>{project.category ?? 'XR Project'}</span>
                {project.status && <span class="rounded-full bg-primary/10 px-2 py-0.5 text-[11px] text-primary">{project.status}</span>}
              </div>
              <h3 class="text-xl font-bold text-slate-900 transition-colors group-hover:text-primary dark:text-white">
                <a class="hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900" href={`/projects/${project.slug}`}>
                  {project.title}
                </a>
              </h3>
              {project.tagline && <p class="mt-1 text-sm text-primary dark:text-blue-200">{project.tagline}</p>}
              <p class="mt-3 text-muted dark:text-slate-300">{project.excerpt}</p>
              {project.tags?.length ? (
                <div class="mt-4 flex flex-wrap gap-2">
                  {project.tags.map((tag) => (
                    <span class="rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700 dark:bg-slate-800 dark:text-slate-200">
                      {tag}
                    </span>
                  ))}
                </div>
              ) : (
                ''
              )}

              <div class="mt-5 flex flex-wrap items-center gap-3">
                <a
                  class="inline-flex items-center gap-1 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-secondary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"
                  href={`/projects/${project.slug}`}
                >
                  View project <span aria-hidden="true" class="ml-1">→</span>
                </a>
                {project.links?.[0] && (
                  <a
                    class="inline-flex items-center gap-1 text-sm font-semibold text-slate-700 underline underline-offset-4 transition hover:text-primary dark:text-slate-200 dark:hover:text-primary"
                    href={project.links[0].href}
                    {...project.links[0].external ? { target: '_blank', rel: 'noreferrer' } : {}}
                  >
                    {project.links[0].label}
                  </a>
                )}
              </div>
            </div>
          </article>
        ))}
      </div>
      <div class="mt-10 text-center">
        <a
          class="inline-flex items-center justify-center rounded-full bg-primary px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-secondary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"
          href="/projects"
        >
          View all projects
        </a>
      </div>
    </div>
  </section>

  <!-- Features2 Widget ************** -->

  <Features2
    title="What We Create at FoVR Interactive"
    subtitle="As a indie developer, we specialise in bringing imaginative VR ideas to life. From custom projects to creative solutions, every experience is crafted with care."
    items={[
      {
        title: 'VR Development',
        description:
          'We create custom VR experiences that bring your ideas to life, from concept to execution, ensuring a highly engaging and immersive environment.',
        icon: 'flat-color-icons:command-line',
      },
      {
        title: 'Interactive Solutions',
        description:
          'Experience our VR solutions firsthand with interactive demos and previews that showcase the full potential of Immersive technology.',
        icon: 'flat-color-icons:donate',
      },
      {
        title: 'XR Consulting',
        description:
          'Want to learn more about extended reality? Our consultants offer strategic advice to help you fully leverage VR technology for your projects.',
        icon: 'flat-color-icons:idea',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Features2>

  <!-- Features Widget *************** -->

  <Features
    id="features"
    title="Main Features of Our Immersive Solutions"
    subtitle="Our VR solutions are designed to meet the needs of educational and entertainment industries, offering several key features that ensure success."
    columns={3}
    items={[
      {
        title: 'Immersive and Professional Design',
        description:
          'Our solutions feature cutting-edge design trends, providing a highly immersive and professional experience.',
        icon: 'tabler:artboard',
      },
      {
        title: 'Multi-Device Compatibility',
        description: 'Our XR experiences adapt seamlessly across different platforms, ensuring a consistent and engaging experience.',
        icon: 'tabler:picture-in-picture',
      },
      {
        title: 'Customisability',
        description:
          'Highly customisable to match your experience, allowing adjustments in design, interactions, and content to fit your needs.',
        icon: 'tabler:adjustments-horizontal',
      },
      {
        title: 'Fast Performance',
        description: 'Optimised for speed to ensure a smooth, uninterrupted immersive experience with minimal latency.',
        icon: 'tabler:rocket',
      },
      {
        title: 'Interactivity',
        description:
          'Engage users with interactive elements that enhance the XR experience, making it more immersive and enjoyable.',
        icon: 'tabler:arrows-right-left',
      },
      {
        title: 'Cross-Platform Compatibility',
        description: 'Our solutions are compatible with various XR hardware and software platforms, ensuring broad accessibility.',
        icon: 'tabler:plug-connected',
      },
    ]}
  />

  <!-- FAQs Widget ******************* -->

  <FAQs
    title="Frequently Asked Questions"
    items={[
      {
        title: 'What services does FoVR Interactive provide?',
        description:
          'FoVR Interactive specialises in creating immersive VR, AR, and XR experiences. Our services include custom VR development, interactive demos and previews, and XR consulting.',
      },
      {
        title: 'Why should I choose immersive VR/AR/XR experiences?',
        description:
          'Immersive experiences provide unparalleled engagement and interactivity, making them ideal for training, marketing, education, and entertainment. They help create memorable and impactful experiences for users.',
      },
      {
        title: 'Can I see a demo of your Immersive projects?',
        description:
          'Yes, we offer interactive demos and previews of our projects. You can experience the full potential of our technology and see how it can be tailored to your needs before implementation.',
      },
      {
        title: 'Do I need special equipment to use your Immersive solutions?',
        description:
          'While some experiences may require specific hardware like VR headsets or AR-enabled devices, we design our solutions to be compatible with a wide range of equipment. We can guide you on the best setup for your needs.',
      },
      {
        title: 'How customisable are your Immersive solutions?',
        description:
          'Our solutions are highly customisable. You can adjust the design, interactions, and content to match your brand identity and specific project requirements.',
      },
      {
        title: 'What support do you offer for your Immersive solutions?',
        description:
          "We provide comprehensive support including step-by-step guides for customisation and a dedicated support team to assist with any technical issues or questions you may have.",
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </FAQs>

  <!-- CallToAction Widget *********** -->

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Contact Us',
        href: '/contact',
      },
    ]}
  >
    <Fragment slot="title">Let’s Collaborate or Chat</Fragment>

    <Fragment slot="subtitle">
      Have an idea? Want to know more about VR? Reach out. We would love to hear from you! Together, we can shape the future of immersive experiences.
    </Fragment>
  </CallToAction>
</Layout>
